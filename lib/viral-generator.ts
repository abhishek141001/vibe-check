import { DynamicQuiz, QuizCategory, ViralTrend } from './dynamic-quiz';

// Viral content templates for different categories
export const viralTemplates = {
  personality: [
    {
      title: "What's Your Hidden Superpower?",
      titleHindi: "рдЖрдкрдХреА рдЫреБрдкреА рд╕реБрдкрд░рдкрд╛рд╡рд░ рдХреНрдпрд╛ рд╣реИ?",
      description: "Discover the superpower you never knew you had!",
      descriptionHindi: "рд╡рд╣ рд╕реБрдкрд░рдкрд╛рд╡рд░ рдЦреЛрдЬреЗрдВ рдЬреЛ рдЖрдкрдХреЛ рдирд╣реАрдВ рдкрддрд╛ рдерд╛!",
      emoji: "ЁЯж╕тАНтЩВя╕П",
      questions: [
        {
          question: "In a crisis, you would:",
          questionHindi: "рд╕рдВрдХрдЯ рдореЗрдВ, рдЖрдк рдХрд░реЗрдВрдЧреЗ:",
          options: [
            { text: "Take charge immediately", textHindi: "рддреБрд░рдВрдд рдиреЗрддреГрддреНрд╡ рдХрд░реЗрдВ", value: "leader" },
            { text: "Analyze the situation first", textHindi: "рдкрд╣рд▓реЗ рд╕реНрдерд┐рддрд┐ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВ", value: "analyst" },
            { text: "Help others stay calm", textHindi: "рджреВрд╕рд░реЛрдВ рдХреЛ рд╢рд╛рдВрдд рд░рдЦрдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдВ", value: "supporter" },
            { text: "Find creative solutions", textHindi: "рд░рдЪрдирд╛рддреНрдордХ рд╕рдорд╛рдзрд╛рди рдЦреЛрдЬреЗрдВ", value: "innovator" }
          ]
        }
      ]
    }
  ],
  culture: [
    {
      title: "Your Cultural Spirit Animal",
      titleHindi: "рдЖрдкрдХрд╛ рд╕рд╛рдВрд╕реНрдХреГрддрд┐рдХ рдЖрддреНрдорд╛ рдкрд╢реБ",
      description: "Which cultural spirit represents your soul?",
      descriptionHindi: "рдХреМрди рд╕рд╛ рд╕рд╛рдВрд╕реНрдХреГрддрд┐рдХ рдЖрддреНрдорд╛ рдЖрдкрдХреА рдЖрддреНрдорд╛ рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддрд╛ рд╣реИ?",
      emoji: "ЁЯжЕ",
      questions: [
        {
          question: "Your ideal festival celebration involves:",
          questionHindi: "рдЖрдкрдХрд╛ рдЖрджрд░реНрд╢ рддреНрдпреЛрд╣рд╛рд░ рдЙрддреНрд╕рд╡ рд╢рд╛рдорд┐рд▓ рдХрд░рддрд╛ рд╣реИ:",
          options: [
            { text: "Traditional rituals", textHindi: "рдкрд╛рд░рдВрдкрд░рд┐рдХ рдЕрдиреБрд╖реНрдард╛рди", value: "traditional" },
            { text: "Community gathering", textHindi: "рд╕рд╛рдореБрджрд╛рдпрд┐рдХ рд╕рднрд╛", value: "community" },
            { text: "Family time", textHindi: "рдкрд╛рд░рд┐рд╡рд╛рд░рд┐рдХ рд╕рдордп", value: "family" },
            { text: "Spiritual reflection", textHindi: "рдЖрдзреНрдпрд╛рддреНрдорд┐рдХ рдЪрд┐рдВрддрди", value: "spiritual" }
          ]
        }
      ]
    }
  ],
  entertainment: [
    {
      title: "Your Netflix Personality",
      titleHindi: "рдЖрдкрдХрд╛ рдиреЗрдЯрдлреНрд▓рд┐рдХреНрд╕ рд╡реНрдпрдХреНрддрд┐рддреНрд╡",
      description: "What does your binge-watching say about you?",
      descriptionHindi: "рдЖрдкрдХреА рдмрд┐рдВрдЬ-рд╡реЙрдЪрд┐рдВрдЧ рдЖрдкрдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреНрдпрд╛ рдХрд╣рддреА рд╣реИ?",
      emoji: "ЁЯУ║",
      questions: [
        {
          question: "Your go-to genre is:",
          questionHindi: "рдЖрдкрдХреА рдкрд╕рдВрджреАрджрд╛ рд╢реИрд▓реА рд╣реИ:",
          options: [
            { text: "Thriller/Mystery", textHindi: "рдереНрд░рд┐рд▓рд░/рд░рд╣рд╕реНрдп", value: "thriller" },
            { text: "Romance/Drama", textHindi: "рд░реЛрдорд╛рдВрд╕/рдбреНрд░рд╛рдорд╛", value: "romance" },
            { text: "Comedy", textHindi: "рдХреЙрдореЗрдбреА", value: "comedy" },
            { text: "Sci-Fi/Fantasy", textHindi: "рд╕рд╛рдЗ-рдлрд╛рдИ/рдлрдВрддрд╛рд╕реА", value: "scifi" }
          ]
        }
      ]
    }
  ]
};

// Trending topics and hashtags
export const trendingTopics = [
  {
    topic: "AI Revolution",
    topicHindi: "рдПрдЖрдИ рдХреНрд░рд╛рдВрддрд┐",
    hashtags: ["#AI", "#FutureTech", "#рдПрдЖрдИ", "#рднрд╡рд┐рд╖реНрдпрддрдХрдиреАрдХ"],
    emoji: "ЁЯдЦ",
    category: "technology"
  },
  {
    topic: "Climate Action",
    topicHindi: "рдЬрд▓рд╡рд╛рдпреБ рдХрд╛рд░реНрдп",
    hashtags: ["#ClimateAction", "#GreenLiving", "#рдЬрд▓рд╡рд╛рдпреБрдХрд╛рд░реНрдп", "#рд╣рд░рд┐рддрдЬреАрд╡рди"],
    emoji: "ЁЯМ▒",
    category: "lifestyle"
  },
  {
    topic: "Mental Health",
    topicHindi: "рдорд╛рдирд╕рд┐рдХ рд╕реНрд╡рд╛рд╕реНрдереНрдп",
    hashtags: ["#MentalHealth", "#SelfCare", "#рдорд╛рдирд╕рд┐рдХрд╕реНрд╡рд╛рд╕реНрдереНрдп", "#рдЖрддреНрдорджреЗрдЦрднрд╛рд▓"],
    emoji: "ЁЯза",
    category: "wellness"
  },
  {
    topic: "Digital Nomad",
    topicHindi: "рдбрд┐рдЬрд┐рдЯрд▓ рдиреЛрдореИрдб",
    hashtags: ["#DigitalNomad", "#RemoteWork", "#рдбрд┐рдЬрд┐рдЯрд▓рдиреЛрдореИрдб", "#рджреВрд░рд╕реНрдердХрд╛рдо"],
    emoji: "ЁЯТ╗",
    category: "lifestyle"
  }
];

// Seasonal and festival content
export const seasonalContent = {
  diwali: {
    title: "Your Diwali Energy",
    titleHindi: "рдЖрдкрдХреА рджреАрд╡рд╛рд▓реА рдКрд░реНрдЬрд╛",
    description: "What kind of Diwali celebration matches your vibe?",
    descriptionHindi: "рдХрд┐рд╕ рддрд░рд╣ рдХрд╛ рджреАрд╡рд╛рд▓реА рдЙрддреНрд╕рд╡ рдЖрдкрдХреЗ рд╡рд╛рдЗрдм рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реИ?",
    emoji: "ЁЯкФ",
    hashtags: ["#Diwali", "#FestivalOfLights", "#рджреАрд╡рд╛рд▓реА", "#рд░реЛрд╢рдиреАрдХрд╛рддреНрдпреЛрд╣рд╛рд░"]
  },
  holi: {
    title: "Your Holi Color",
    titleHindi: "рдЖрдкрдХрд╛ рд╣реЛрд▓реА рд░рдВрдЧ",
    description: "Which color represents your personality this Holi?",
    descriptionHindi: "рдХреМрди рд╕рд╛ рд░рдВрдЧ рдЗрд╕ рд╣реЛрд▓реА рдореЗрдВ рдЖрдкрдХреЗ рд╡реНрдпрдХреНрддрд┐рддреНрд╡ рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддрд╛ рд╣реИ?",
    emoji: "ЁЯОи",
    hashtags: ["#Holi", "#FestivalOfColors", "#рд╣реЛрд▓реА", "#рд░рдВрдЧреЛрдВрдХрд╛рддреНрдпреЛрд╣рд╛рд░"]
  },
  newYear: {
    title: "Your 2025 Vibe",
    titleHindi: "рдЖрдкрдХрд╛ 2025 рд╡рд╛рдЗрдм",
    description: "What energy will you bring to the new year?",
    descriptionHindi: "рдирдП рд╕рд╛рд▓ рдореЗрдВ рдЖрдк рдХреМрди рд╕реА рдКрд░реНрдЬрд╛ рд▓рд╛рдПрдВрдЧреЗ?",
    emoji: "ЁЯОК",
    hashtags: ["#NewYear", "#2025Vibes", "#рдирд╡рд╡рд░реНрд╖", "#рдирдПрд╕рд╛рд▓"]
  }
};

// Function to generate viral quiz based on trending topics
export function generateViralQuiz(topic: string, category: string): DynamicQuiz {
  const template = viralTemplates[category as keyof typeof viralTemplates]?.[0];
  const trendingTopic = trendingTopics.find(t => t.topic.toLowerCase().includes(topic.toLowerCase()));
  
  if (!template) {
    throw new Error(`No template found for category: ${category}`);
  }

  const quizId = `viral-${topic.toLowerCase().replace(/\s+/g, '-')}-${Date.now()}`;
  
  return {
    id: quizId,
    title: template.title,
    titleHindi: template.titleHindi,
    description: template.description,
    descriptionHindi: template.descriptionHindi,
    emoji: template.emoji,
    category: category,
    tags: trendingTopic ? trendingTopic.hashtags : [topic.toLowerCase()],
    isViral: true,
    isFeatured: false,
    createdAt: new Date(),
    updatedAt: new Date(),
    questions: template.questions.map((q: any, index: number) => ({
      ...q,
      id: `q${index + 1}`,
      type: 'single' as const,
      required: true,
      order: index + 1
    })),
    results: generateResults(template.title, template.emoji),
    resultMapping: generateResultMapping(template.questions),
    metadata: {
      views: 0,
      completions: 0,
      shares: 0,
      avgRating: 0,
      trendingScore: 100 // High trending score for new viral content
    }
  };
}

// Function to generate seasonal quiz
export function generateSeasonalQuiz(season: string): DynamicQuiz {
  const content = seasonalContent[season as keyof typeof seasonalContent];
  
  if (!content) {
    throw new Error(`No seasonal content found for: ${season}`);
  }

  const quizId = `seasonal-${season}-${Date.now()}`;
  
  return {
    id: quizId,
    title: content.title,
    titleHindi: content.titleHindi,
    description: content.description,
    descriptionHindi: content.descriptionHindi,
    emoji: content.emoji,
    category: 'culture',
    tags: content.hashtags,
    isViral: true,
    isFeatured: true,
    createdAt: new Date(),
    updatedAt: new Date(),
    questions: generateSeasonalQuestions(season),
    results: generateSeasonalResults(season),
    resultMapping: generateSeasonalMapping(season),
    metadata: {
      views: 0,
      completions: 0,
      shares: 0,
      avgRating: 0,
      trendingScore: 95
    }
  };
}

// Helper functions
function generateResults(title: string, emoji: string) {
  return [
    {
      id: 'result-1',
      name: 'Type A',
      nameHindi: 'рдЯрд╛рдЗрдк рдП',
      emoji: 'ЁЯФе',
      description: 'You are a natural leader with incredible energy!',
      descriptionHindi: 'рдЖрдк рдПрдХ рдкреНрд░рд╛рдХреГрддрд┐рдХ рдиреЗрддрд╛ рд╣реИрдВ рдЬрд┐рдирдореЗрдВ рдЕрд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдКрд░реНрдЬрд╛ рд╣реИ!',
      color: 'bg-red-500',
      shareableText: `Just discovered I'm Type A! ЁЯФе Take the ${title} quiz to find yours!`,
      shareableTextHindi: `рдЕрднреА рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рдореИрдВ рдЯрд╛рдЗрдк рдП рд╣реВрдВ! ЁЯФе рдЕрдкрдирд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреЗ рд▓рд┐рдП ${title} рдХреНрд╡рд┐рдЬрд╝ рдХрд░реЗрдВ!`,
      hashtags: ['#Quiz', '#Personality', '#TypeA'],
      viralPotential: 85
    },
    {
      id: 'result-2',
      name: 'Type B',
      nameHindi: 'рдЯрд╛рдЗрдк рдмреА',
      emoji: 'ЁЯТЩ',
      description: 'You are calm, thoughtful, and deeply wise!',
      descriptionHindi: 'рдЖрдк рд╢рд╛рдВрдд, рд╡рд┐рдЪрд╛рд░рд╢реАрд▓ рдФрд░ рдЧрд╣рд░реЗ рдмреБрджреНрдзрд┐рдорд╛рди рд╣реИрдВ!',
      color: 'bg-blue-500',
      shareableText: `Just discovered I'm Type B! ЁЯТЩ Take the ${title} quiz to find yours!`,
      shareableTextHindi: `рдЕрднреА рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рдореИрдВ рдЯрд╛рдЗрдк рдмреА рд╣реВрдВ! ЁЯТЩ рдЕрдкрдирд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреЗ рд▓рд┐рдП ${title} рдХреНрд╡рд┐рдЬрд╝ рдХрд░реЗрдВ!`,
      hashtags: ['#Quiz', '#Personality', '#TypeB'],
      viralPotential: 80
    }
  ];
}

function generateResultMapping(questions: any[]) {
  // Simple mapping logic - can be enhanced
  return {
    'leader-analyst': 'result-1',
    'supporter-innovator': 'result-2'
  };
}

function generateSeasonalQuestions(season: string) {
  // Generate questions based on season
  return [
    {
      id: 'q1',
      question: `How do you celebrate ${season}?`,
      questionHindi: `рдЖрдк ${season} рдХреИрд╕реЗ рдордирд╛рддреЗ рд╣реИрдВ?`,
      type: 'single' as const,
      required: true,
      order: 1,
      options: [
        { id: 'a1', text: 'With family', textHindi: 'рдкрд░рд┐рд╡рд╛рд░ рдХреЗ рд╕рд╛рде', value: 'family' },
        { id: 'a2', text: 'With friends', textHindi: 'рджреЛрд╕реНрддреЛрдВ рдХреЗ рд╕рд╛рде', value: 'friends' },
        { id: 'a3', text: 'Quietly', textHindi: 'рд╢рд╛рдВрддрд┐рдкреВрд░реНрд╡рдХ', value: 'quiet' },
        { id: 'a4', text: 'Big celebration', textHindi: 'рдмрдбрд╝рд╛ рдЙрддреНрд╕рд╡', value: 'big' }
      ]
    }
  ];
}

function generateSeasonalResults(season: string) {
  return [
    {
      id: 'family-celebrator',
      name: 'Family Celebrator',
      nameHindi: 'рдкрд╛рд░рд┐рд╡рд╛рд░рд┐рдХ рдЙрддреНрд╕рд╡рдХрд░реНрддрд╛',
      emoji: 'ЁЯСитАНЁЯСйтАНЁЯСзтАНЁЯСж',
      description: `You make ${season} special with family traditions!`,
      descriptionHindi: `рдЖрдк рдкрд╛рд░рд┐рд╡рд╛рд░рд┐рдХ рдкрд░рдВрдкрд░рд╛рдУрдВ рд╕реЗ ${season} рдХреЛ рдЦрд╛рд╕ рдмрдирд╛рддреЗ рд╣реИрдВ!`,
      color: 'bg-green-500',
      shareableText: `Just discovered I'm a Family Celebrator! ЁЯСитАНЁЯСйтАНЁЯСзтАНЁЯСж Take the ${season} quiz to find yours!`,
      shareableTextHindi: `рдЕрднреА рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рдореИрдВ рдПрдХ рдкрд╛рд░рд┐рд╡рд╛рд░рд┐рдХ рдЙрддреНрд╕рд╡рдХрд░реНрддрд╛ рд╣реВрдВ! ЁЯСитАНЁЯСйтАНЁЯСзтАНЁЯСж рдЕрдкрдирд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреЗ рд▓рд┐рдП ${season} рдХреНрд╡рд┐рдЬрд╝ рдХрд░реЗрдВ!`,
      hashtags: ['#Quiz', '#Family', '#Celebration'],
      viralPotential: 90
    }
  ];
}

function generateSeasonalMapping(season: string) {
  return {
    'family': 'family-celebrator'
  };
}

// Function to get trending content suggestions
export function getTrendingSuggestions(): string[] {
  return [
    "AI and Technology",
    "Climate Change",
    "Mental Health",
    "Remote Work",
    "Sustainable Living",
    "Digital Wellness",
    "Cultural Heritage",
    "Future of Work"
  ];
}

// Function to get seasonal suggestions
export function getSeasonalSuggestions(): string[] {
  const currentDate = new Date();
  const month = currentDate.getMonth() + 1;
  
  if (month >= 10 && month <= 11) return ['diwali'];
  if (month >= 2 && month <= 3) return ['holi'];
  if (month === 1) return ['newYear'];
  
  return ['diwali', 'holi', 'newYear'];
}
